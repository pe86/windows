# Απομακρυσμένη πρόσβαση

Για την απομακρυσμένη πρόσβαση στον εξυπηρετητή του Σ.Ε.Π.Ε.Η.Υ. ή στους σταθμούς εργασίας, υπάρχουν οι ακόλουθες δυνατότητες:

!!! tip "Συμβουλή"
    Στις οδηγίες που ακολουθούν ζητείται η πραγματική IP του εξυπηρετητή. Εάν δεν την γνωρίζετε, επισκεφτείτε τη σελίδα <https://ts.sch.gr/services/ip>.

## Anydesk

Το `Anydesk` παρέχεται **δωρεάν για προσωπική χρήση** και διαθέτει δυνατότητες αντίστοιχες με του teamviewer, ενώ υποστηρίζει το σύνολο των διαδομένων λειτουργικών συστημάτων. Μπορείτε να το κατεβάσετε [από τη σελίδα του](https://www.anydesk.com), να το εγκαταστήσετε και κατόπιν να ρυθμίσετε έναν κωδικό για απομακρυσμένη πρόσβαση χωρίς επιβεβαίωση.

!!! powershell "PowerShell (administrator): Εγκατάσταση Anydesk"
    ```shell
    winget install --id=AnyDeskSoftwareGmbH.AnyDesk  -e
    ```

### Πλεονεκτήματα

- Δεν χρειάζεται να ασχοληθείτε με τις IP διευθύνσεις και τα DNS ονόματα που αναφέρονται στις παρακάτω ενότητες.
- Δεν εξαρτάται από το αν το Σ.Ε.Π.Ε.Η.Υ. διαθέτει δρομολογητή Π.Σ.Δ. (cisco, mikrotik κτλ) ή μόνο CPE του Cosmote
- Αρκεί να γνωρίζετε το 9-ψήφιο νούμερο που διαθέτει το `Anydesk` στον εξυπηρετητή στο πεδίο **`This Desk`** και να το δηλώσετε στην εφαρμογή `Anydesk` στο πεδίο **`Remote Desk`** σε οποιονδήποτε προσωπικό υπολογιστή με πρόσβαση στο διαδίκτυο.

### Μειονεκτήματα

- Η κίνηση "περνάει" από τους servers της anydesk, οπότε υπάρχουν θέματα ασφάλειας και επιδόσεων.
- Είναι δωρεάν για προσωπική χρήση

!!! info "Πληροφορία"
    Μπορείτε να αυξήσετε την ασφάλεια της σύνδεσης εάν ενεργοποιήσετε και [Two Factor Authentication](https://en.wikipedia.org/wiki/Multi-factor_authentication) πέραν του κωδικού απομακρυσμένης σύνδεσης.

## Πρόσβαση με χρήση πρωτοκόλλου RDP

Τα MS Windows λειτουργικά συστήματα υποστηρίζουν απομακρυσμένη πρόσβαση με χρήση του πρωτοκόλλου Remote Desktop Connection [RDP](https://en.wikipedia.org/wiki/Remote_Desktop_Protocol). Στον εξυπηρετητή έχετε ήδη ενεργοποιήσει κατά το βήμα των ["Βασικών ρυθμίσεων εξυπηρετητή"](../../2019/basic-settings/index.md) την απομακρυσμένη πρόσβαση μέσω RDP.

Από ένα MS Windows λειτουργικό σύστημα μπορείτε να συνδεθείτε στον εξυπηρετητή:

- μέσω της εφαρμογής `Σύνδεση Απομακρυσμένης Επιφάνειας Εργασίας` ή αλλιώς `Remote Desktop Connection` για αγγλικό περιβάλλον.
- Εναλλακτικά χρησιμοποιήστε την εντολή:

    ```shell
        mstsc /v:IP_διεύθυνση_του_εξυπηρετητή
    ```

Από Linux λειτουργικά συστήματα μπορείτε να συνδεθείτε στον εξυπηρετητή μέσω της εφαρμογής `xfreerdp` με την εντολή:

```shell
    xfreerdp /v:IP_διεύθυνση_του_εξυπηρετητή /relax-order-checks +glyph-cache /size:1600x900
```

### Πλεονεκτήματα

- Όλα τα λειτουργικά συστήματα (windows, linux κτλ) διαθέτουν υποστήριξη του συγκεκριμένου πρωτοκόλλου.

### Μειονεκτήματα

- Ιδιωτική IP διεύθυνση του εξυπηρετητή της μορφής (10.x.y.z) διαθέτουν μόνο τα Σ.Ε.Π.Ε.Η.Υ. με δρομολογητή Π.Σ.Δ. (cisco, mikrotik κτλ).
- Η ιδιωτική IP διεύθυνση του εξυπηρετητή (10.x.y.z) είναι προσβάσιμη **μόνο** από το τοπικό δίκτυο της σχολικής μονάδας, ή από το ιδιωτικό δίκτυο του Π.Σ.Δ. (10.0.0.0/8).
- Η πρόσβαση μέσω πρωτοκόλλου RDP (TCP θύρα 3389) στην πραγματική IP διεύθυνση του εξυπηρετητή, είτε διαθέτετε δρομολογητή Π.Σ.Δ. είτε μόνο CPE Cosmote, **απαγορεύεται για λόγους ασφαλείας** τόσο από το Π.Σ.Δ. όσο και από το CPE του Cosmote.

!!! tip "Συμβουλή"
    Για Σ.Ε.Π.Ε.Η.Υ. που διαθέτουν μόνο CPE Cosmote είναι δυνατή η ρύθμιση του CPE για να επιτρέψει τις εισερχόμενες RDP συνδέσεις. Για Σ.Ε.Π.Ε.Η.Υ. που διαθέτουν δρομολογητή Π.Σ.Δ. είναι δυνατή η ρύθμιση του εξυπηρετητή να "ακούει" σε άλλη TCP θύρα. **Όμως αυτές οι άρσεις των περιορισμών ασφάλειας καλό είναι να αποφεύγονται**.

## Πρόσβαση με χρήση του πρωτοκόλλου RFB και αντίστροφη σύνδεση

Για την πραγματοποίηση αυτής της σύνδεσης προτείνεται να χρησιμοποιηθούν εφαρμογές που βασίζονται στην ανοιχτή τεχνολογία [VNC](https://en.wikipedia.org/wiki/Virtual_Network_Computing) και αντίστοιχα στο πρωτόκολλο [RFB](https://en.wikipedia.org/wiki/RFB_protocol) και οι οποίες υποστηρίζονται από περισσότερα γνωστά λειτουργικά συστήματα. Το `UltraVNC` είναι από τις πιο γνωστές ΕΛ/ΛΑΚ εφαρμογές που αξιοποιούν το συγκεκριμένο πρωτόκολλο και είναι διαθέσιμο στη σελίδα <https://uvnc.com/downloads/ultravnc.html>.

!!! powershell "PowerShell (administrator): Εγκατάσταση UltraVNC"
    ```shell
    winget install --id=uvncbvba.UltraVnc  -e
    ```

Στον εξυπηρετητή εγκαθίσταται το κομμάτι του VNC εξυπηρετητή, το οποίο "ακούει" στην TCP θύρα 5900. Σε έναν οποιοδήποτε υπολογιστή που έχει πρόσβαση στο διαδίκτυο εγκαθίσταται το κομμάτι του VNC πελάτη. Για να επιτρέψει τη σύνδεση ο εξυπηρετητής ζητά έναν κωδικό ασφαλείας που έχετε ορίσει κατά την εγκατάστασή του.

Με αυτόν τον τρόπο σύνδεσης το `UltraVNC` έχει τα ίδια προβλήματα με αυτά που αναφέρθηκαν και στο RDP πρωτόκολλο σε ότι αφορά την πολιτική ασφαλείας του Π.Σ.Δ. και αντίστοιχα τις ρυθμίσεις στο CPE του Cosmote

Όμως το `UltraVNC` υποστηρίζει και **αντίστροφή σύνδεση** ([reverse connection](https://en.wikipedia.org/wiki/Reverse_connection)). Το σκεπτικό είναι ο εξυπηρετητής (VNC Server) να ξεκινήσει αυτός σύνδεση προς τον πελάτη (κάτι που επιτρέπεται και από το Π.Σ.Δ. και από το CPE του Cosmote) και στη συνέχεια ο πελάτης να αποκτήσει πρόσβαση στον εξυπηρετητή. Για αυτόν το λόγο ο ultravnc πελάτης θα πρέπει να είναι σε κατάσταση αναμονής (Listen).

Έτσι στον εξυπηρετητή δίνετε την εντολή:

```shell
    c:\program files\uvnc uvba\ultravnc\winvnc -connect ip_του_γρ._ΠΛΗΝΕΤ_ή_του_σπιτιού_σας -run
```

Στον Η/Υ του σπιτιού σας ή του γραφείου ΠΛΗΝΕΤ δίνετε την εντολή:

```shell
    c:\program files\uvnc uvba\ultravnc\vncviewer /listen
```

### Πλεονεκτήματα

- Όλα τα λειτουργικά συστήματα (windows, linux κτλ) διαθέτουν υποστήριξη του VNC.
- Το UltraVNC είναι ΕΛ/ΛΑΚ και δεν έχετε θέματα αδειοδότησης.
- Η επικοινωνία μέσω αντίστροφης σύνδεσης επιτρέπεται χωρίς να απαιτεί πρόβλημα με τους περιορισμούς ασφαλείας του Π.Σ.Δ. (δεν υπάρχει ανοιχτή θύρα TCP 5900 με πρόσβαση από το διαδίκτυο).
- Ο εξυπηρετητής δέχεται σύνδεση μόνο από τη συσκευή με IP διεύθυνση αυτήν που ξεκινά να συνδεθεί (άρα υπάρχει ασφάλεια).

### Μειονεκτήματα

- Το πρωτόκολλο VNC έχει αρκετές ευπάθειες και για αυτό το λόγο δεν θα πρέπει να το αφήνετε ενεργό στον εξυπηρετητή σαν υπηρεσία (service). Θα το ενεργοποιείτε όταν επιθυμείτε απομακρυσμένη πρόσβαση.
- Θα πρέπει να γνωρίζετε την IP διεύθυνση του Η/Υ από τον οποίο επιθυμείτε να έχετε πρόσβαση προς τον εξυπηρετητή του Σ.Ε.Π.Ε.Η.Υ.
- Είναι σχετικά πολύπλοκη η διαδικασία (απαιτεί τεχνικές γνώσεις) αν δεν έχετε σταθερή πραγματική IP διεύθυνση να συνδεθείτε από το σπίτι σας (βλ. συμβουλή που ακολουθεί).

!!! tip "Συμβουλή"
    Εάν πρόκειται για τον Η/Υ του σπιτιού σας, επειδή συνήθως δεν έχει σταθερή πραγματική IP, θα πρέπει:
    - να έχετε πρόσβαση σε υπηρεσία [Dynamic DNS](https://en.wikipedia.org/wiki/Dynamic_DNS) (DDNS) και να την ορίσετε στο CPE του σπιτιού σας.
    - να ορίστε στο CPE προώθηση της θύρας [(port forwarding)](https://en.wikipedia.org/wiki/Port_forwarding) TCP 5500 (η θύρα που "ακούει" ο ultravnc πελάτης) στην ιδιωτική IP διεύθυνση του Η/Υ σας στο σπίτι.
    - στον εξυπηρετητή του Σ.Ε.Π.Ε.Η.Υ. να ορίσετε να γίνει σύνδεση προς το dynamic dns όνομα του Η/Υ του σπιτιού σας.
